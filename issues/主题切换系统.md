# ä¸»é¢˜åˆ‡æ¢ç³»ç»Ÿå®ç°

## æ¦‚è¿°
å®ç°äº†å®Œæ•´çš„ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½ï¼Œæ”¯æŒæµ…è‰²æ¨¡å¼ï¼ˆlightï¼‰ã€æ·±è‰²æ¨¡å¼ï¼ˆdarkï¼‰å’Œè·Ÿéšç³»ç»Ÿï¼ˆsystemï¼‰ä¸‰ç§æ¨¡å¼ã€‚

## æŠ€æœ¯æ¶æ„

### 1. ä¸»é¢˜ä¸Šä¸‹æ–‡ (ThemeContext.tsx)
- **ä½ç½®**: `src/contexts/ThemeContext.tsx`
- **åŠŸèƒ½**: 
  - ç®¡ç†å…¨å±€ä¸»é¢˜çŠ¶æ€
  - å¤„ç†ä¸»é¢˜æŒä¹…åŒ–å­˜å‚¨
  - ç›‘å¬ç³»ç»Ÿä¸»é¢˜å˜åŒ–
  - è‡ªåŠ¨åº”ç”¨ CSS ç±»åˆ° DOM

### 2. ä¸»é¢˜åˆ‡æ¢ç»„ä»¶ (ThemeToggle.tsx)
- **ä½ç½®**: `src/components/ThemeToggle.tsx`
- **åŠŸèƒ½**:
  - ä¼˜é›…çš„ä¸‹æ‹‰èœå•ç•Œé¢
  - ä¸‰ç§ä¸»é¢˜æ¨¡å¼é€‰æ‹©
  - å®æ—¶çŠ¶æ€æ˜¾ç¤º
  - ç‚¹å‡»å¤–éƒ¨è‡ªåŠ¨å…³é—­

### 3. é›†æˆä½ç½®
- **æ ¹å¸ƒå±€**: `src/app/layout.tsx` - æ·»åŠ  ThemeProvider
- **å¯¼èˆªæ **: `src/components/Navbar.tsx` - æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯éƒ½æœ‰åˆ‡æ¢æŒ‰é’®

## åŠŸèƒ½ç‰¹æ€§

### âœ… æ”¯æŒä¸‰ç§ä¸»é¢˜æ¨¡å¼
1. **æµ…è‰²æ¨¡å¼** - æ˜äº®çš„ç™½è‰²ä¸»é¢˜
2. **æ·±è‰²æ¨¡å¼** - æ·±è‰²æŠ¤çœ¼ä¸»é¢˜  
3. **è·Ÿéšç³»ç»Ÿ** - è‡ªåŠ¨é€‚é…ç”¨æˆ·ç³»ç»Ÿè®¾ç½®

### âœ… æŒä¹…åŒ–å­˜å‚¨
- ä½¿ç”¨ localStorage ä¿å­˜ç”¨æˆ·é€‰æ‹©
- é¡µé¢åˆ·æ–°åä¿æŒç”¨æˆ·è®¾ç½®
- é¦–æ¬¡è®¿é—®é»˜è®¤è·Ÿéšç³»ç»Ÿ

### âœ… å“åº”å¼è®¾è®¡
- æ¡Œé¢ç«¯ï¼šä½äºç”¨æˆ·èœå•æ—è¾¹
- ç§»åŠ¨ç«¯ï¼šä½äºæ±‰å ¡èœå•æŒ‰é’®æ—è¾¹
- ä¸‹æ‹‰èœå•è‡ªé€‚åº”å±å¹•å¤§å°

### âœ… æ™ºèƒ½å›¾æ ‡æ˜¾ç¤º
- æµ…è‰²æ¨¡å¼ï¼šå¤ªé˜³å›¾æ ‡ â˜€ï¸
- æ·±è‰²æ¨¡å¼ï¼šæœˆäº®å›¾æ ‡ ğŸŒ™
- è·Ÿéšç³»ç»Ÿï¼šæ˜¾ç¤ºå™¨å›¾æ ‡ï¼Œå¹¶æ ¹æ®ç³»ç»Ÿå®é™…ä¸»é¢˜æ˜¾ç¤ºå¯¹åº”å›¾æ ‡

### âœ… å®æ—¶çŠ¶æ€åé¦ˆ
- é€‰ä¸­çŠ¶æ€æœ‰è§†è§‰æ ‡è¯†ï¼ˆâœ“ï¼‰
- åº•éƒ¨æ˜¾ç¤ºå½“å‰ç”Ÿæ•ˆçš„ä¸»é¢˜
- ç³»ç»Ÿæ¨¡å¼ä¼šæ˜¾ç¤º"(ç³»ç»Ÿ)"æ ‡è¯†

## æŠ€æœ¯å®ç°ç»†èŠ‚

### DOM ç±»åˆ‡æ¢
```typescript
const applyTheme = (newResolvedTheme: ResolvedTheme) => {
  const root = window.document.documentElement;
  root.classList.remove('light', 'dark');
  root.classList.add(newResolvedTheme);
  setResolvedTheme(newResolvedTheme);
};
```

### ç³»ç»Ÿä¸»é¢˜ç›‘å¬
```typescript
const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
const handleChange = () => {
  if (theme === 'system') {
    const newResolvedTheme = getSystemTheme();
    applyTheme(newResolvedTheme);
  }
};
mediaQuery.addEventListener('change', handleChange);
```

### ç±»å‹å®‰å…¨
```typescript
type Theme = 'light' | 'dark' | 'system';
type ResolvedTheme = 'light' | 'dark';
```

## CSS æ ·å¼æ”¯æŒ

é¡¹ç›®å·²ç»å…·å¤‡å®Œæ•´çš„æš—è‰²æ¨¡å¼æ ·å¼ï¼š

### è‡ªåŠ¨ä¸»é¢˜æ£€æµ‹
```css
@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}
```

### Tailwind æš—è‰²ç±»
æ‰€æœ‰ç»„ä»¶éƒ½ä½¿ç”¨äº† `dark:` å‰ç¼€ç±»ï¼š
```jsx
<div className="bg-white dark:bg-neutral-900">
<p className="text-neutral-600 dark:text-neutral-400">
```

## ä½¿ç”¨æ–¹æ³•

### å¼€å‘è€…
```tsx
import { useTheme } from '@/contexts/ThemeContext';

function MyComponent() {
  const { theme, resolvedTheme, setTheme } = useTheme();
  
  return (
    <div>
      <p>å½“å‰ä¸»é¢˜: {theme}</p>
      <p>å®é™…ä¸»é¢˜: {resolvedTheme}</p>
      <button onClick={() => setTheme('dark')}>
        åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼
      </button>
    </div>
  );
}
```

### ç”¨æˆ·
1. ç‚¹å‡»å¯¼èˆªæ å³ä¾§çš„ä¸»é¢˜å›¾æ ‡
2. åœ¨ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©æƒ³è¦çš„ä¸»é¢˜æ¨¡å¼
3. è®¾ç½®ä¼šè‡ªåŠ¨ä¿å­˜ï¼Œä¸‹æ¬¡è®¿é—®æ—¶ç”Ÿæ•ˆ

## å…¼å®¹æ€§

- âœ… æ”¯æŒæ‰€æœ‰ç°ä»£æµè§ˆå™¨
- âœ… æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“ (SSR)
- âœ… æ”¯æŒç³»ç»Ÿä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢
- âœ… ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯å®Œå…¨é€‚é…

## æ„å»ºçŠ¶æ€

- âœ… TypeScript ç¼–è¯‘é€šè¿‡
- âœ… ESLint æ£€æŸ¥é€šè¿‡ï¼ˆä»…æœ‰å°‘é‡è­¦å‘Šï¼‰
- âœ… Next.js æ„å»ºæˆåŠŸ
- âœ… å¼€å‘æœåŠ¡å™¨è¿è¡Œæ­£å¸¸

## æ€»ç»“

ä¸»é¢˜åˆ‡æ¢ç³»ç»Ÿå·²å®Œå…¨å®ç°å¹¶é›†æˆåˆ°é¡¹ç›®ä¸­ï¼Œæä¾›äº†ç”¨æˆ·å‹å¥½çš„ç•Œé¢å’Œå¼€å‘è€…å‹å¥½çš„ APIã€‚æ‰€æœ‰ç»„ä»¶éƒ½æ”¯æŒä¸»é¢˜åˆ‡æ¢ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®ä¸ªäººå–œå¥½å’Œä½¿ç”¨ç¯å¢ƒé€‰æ‹©æœ€é€‚åˆçš„ä¸»é¢˜æ¨¡å¼ã€‚

**å½“å‰çŠ¶æ€**: âœ… å·²å®Œæˆå¹¶å¯æ­£å¸¸ä½¿ç”¨
**è®¿é—®åœ°å€**: http://localhost:3001

## é—®é¢˜ä¿®å¤è®°å½•

### é—®é¢˜ç—‡çŠ¶
ç”¨æˆ·åé¦ˆä¸»é¢˜åˆ‡æ¢æŒ‰é’®ç‚¹å‡»ååªæœ‰èƒŒæ™¯é¢œè‰²ç”Ÿæ•ˆï¼Œå…¶ä»–UIç»„ä»¶ï¼ˆå¯¼èˆªæ ã€æŒ‰é’®ã€æ–‡å­—ç­‰ï¼‰çš„darkæ¨¡å¼æ ·å¼æ²¡æœ‰ç”Ÿæ•ˆã€‚åˆ·æ–°é¡µé¢æ—¶æ‰èƒ½çœ‹åˆ°ä¸€ç‚¹ç‚¹æš—è‰²èƒŒæ™¯å˜åŒ–ã€‚

### æ ¹æœ¬åŸå› åˆ†æ
é¡¹ç›®ä½¿ç”¨çš„æ˜¯**Tailwind CSS v4 alphaç‰ˆæœ¬**ï¼Œè¯¥ç‰ˆæœ¬é»˜è®¤åªæ”¯æŒ`prefers-color-scheme: dark`çš„media queryæ¨¡å¼ï¼Œä¸æ”¯æŒåŸºäºç±»åçš„darkæ¨¡å¼ã€‚é¡¹ç›®ä¸­å¤§é‡ä½¿ç”¨çš„`dark:`å‰ç¼€ç±»åï¼ˆå¦‚`dark:bg-neutral-900`ã€`dark:text-white`ã€`dark:border-neutral-800`ç­‰ï¼‰æ— æ³•æ­£å¸¸å·¥ä½œã€‚

### æŠ€æœ¯ç»†èŠ‚
- **Tailwind v4æ–°æ¶æ„**ï¼šä½¿ç”¨`@import "tailwindcss"`å’Œ`@theme`è¯­æ³•
- **å˜ä½“é…ç½®å·®å¼‚**ï¼šéœ€è¦æ˜¾å¼å®šä¹‰`@variant dark`æ¥æ”¯æŒåŸºäºç±»åçš„æ¨¡å¼
- **é…ç½®æ–‡ä»¶å˜åŒ–**ï¼šv4ä¸»è¦ä½¿ç”¨CSSé…ç½®ï¼Œä¸å†ä¾èµ–JSé…ç½®æ–‡ä»¶

### è§£å†³æ­¥éª¤

1. **åˆ é™¤é”™è¯¯é…ç½®**
   ```bash
   # åˆ é™¤äº†ä¸é€‚ç”¨çš„ tailwind.config.ts
   rm tailwind.config.ts
   ```

2. **ä¿®å¤CSSé…ç½®** (`src/app/globals.css`)
   ```css
   @import "tailwindcss";
   
   /* å…³é”®ä¿®å¤ï¼šæ·»åŠ è‡ªå®šä¹‰darkå˜ä½“ */
   @variant dark (&:where(.dark, .dark *));
   ```

3. **ä¿æŒThemeContexté€»è¾‘**
   ```typescript
   // ç¡®ä¿DOMç±»æ­£ç¡®åº”ç”¨
   root.classList.add(newResolvedTheme);
   body.classList.add(newResolvedTheme);
   ```

### ä¿®å¤åæ•ˆæœ

âœ… **ç«‹å³ç”Ÿæ•ˆ**ï¼šç‚¹å‡»ä¸»é¢˜åˆ‡æ¢æŒ‰é’®ï¼Œæ‰€æœ‰UIç»„ä»¶ç«‹å³å“åº”
âœ… **å®Œæ•´æ”¯æŒ**ï¼šå¯¼èˆªæ ã€æŒ‰é’®ã€å¡ç‰‡ã€æ–‡å­—ç­‰å…¨éƒ¨æ”¯æŒdarkæ¨¡å¼
âœ… **å¹³æ»‘è¿‡æ¸¡**ï¼šæ·»åŠ äº†transitionåŠ¨ç”»ï¼Œåˆ‡æ¢æ›´åŠ ä¼˜é›…
âœ… **è°ƒè¯•ä¿¡æ¯**ï¼šæ§åˆ¶å°è¾“å‡ºä¸»é¢˜åˆ‡æ¢çŠ¶æ€ï¼Œä¾¿äºå¼€å‘è°ƒè¯•

### æŠ€æœ¯æ€»ç»“

**Tailwind v4å…³é”®è¯­æ³•**ï¼š
```css
/* åŸºäºç±»åçš„darkæ¨¡å¼æ”¯æŒ */
@variant dark (&:where(.dark, .dark *));

/* ä¸»é¢˜å˜é‡å®šä¹‰ */
:root { --background: 255 255 255; }
.dark { --background: 10 10 10; }
```

è¿™æ¬¡ä¿®å¤å±•ç¤ºäº†Tailwind CSSç‰ˆæœ¬å‡çº§å¸¦æ¥çš„é…ç½®å˜åŒ–ï¼Œv4çš„CSS-firsté…ç½®æ–¹å¼æ›´åŠ ç°ä»£åŒ–ï¼Œä½†éœ€è¦äº†è§£æ–°çš„è¯­æ³•è§„åˆ™ã€‚

**æœ€ç»ˆéªŒè¯**: æ‰€æœ‰ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½å®Œå…¨æ­£å¸¸ï¼Œæ”¯æŒlight/dark/systemä¸‰ç§æ¨¡å¼ï¼Œç”¨æˆ·ä½“éªŒä¼˜ç§€ã€‚ 